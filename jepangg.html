<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Belajar Bahasa Jepang (Interaktif)</title>
<link href="https://fonts.googleapis.com/css2?family=Sawarabi+Mincho&family=Noto+Serif+JP:wght@400;700&display=swap" rel="stylesheet">

<style>
  :root{
    --bg-paper: #fbf6f0;
    --wood: #5c3822;
    --accent-red: #b83b24;
    --muted-ink: #2d2a26;
    --gold: #caa04a;
    --card-bg: rgba(255,255,255,0.92);
    --shadow: 0 8px 26px rgba(0,0,0,0.12);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family: "Noto Serif JP", "Sawarabi Mincho", "Segoe UI", sans-serif;
    color:var(--muted-ink);
    background:
      radial-gradient(1200px 600px at 10% 12%, rgba(184,59,36,0.04), transparent 12%),
      linear-gradient(180deg, #fffdfa 0%, var(--bg-paper) 55%, #f8f6f3 100%);
    min-height:100vh;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    overflow-x:hidden;
  }
  body::before{
    content:'';
    position:fixed; inset:0; pointer-events:none;
    background-image:
      linear-gradient(90deg, rgba(0,0,0,0.007) 1px, transparent 1px),
      linear-gradient(0deg, rgba(0,0,0,0.007) 1px, transparent 1px);
    background-size: 90px 90px, 140px 140px;
    mix-blend-mode:overlay;
    opacity:0.55;
  }

  header{
    text-align:center; padding:18px 16px;
    color:var(--bg-paper);
    background: linear-gradient(90deg, rgba(184,59,36,0.98), rgba(131,88,194,0.04));
    box-shadow: 0 6px 18px rgba(0,0,0,0.12);
    font-size:1.45rem; font-weight:700; position:relative;
  }
  header .sub{ display:block; font-size:0.85rem; margin-top:6px; color: rgba(255,245,235,0.9); font-weight:400; }

  header::after{
    content:''; width:96px; height:10px; display:block; margin:12px auto 0;
    background: linear-gradient(90deg,var(--accent-red), #a83a2a); border-radius:6px;
  }

  nav{
    display:flex; justify-content:center; gap:10px; flex-wrap:wrap;
    padding:12px 10px; margin:14px auto; max-width:1100px;
    background: linear-gradient(180deg, rgba(255,255,255,0.6), rgba(255,255,255,0.45));
    border-radius:12px; box-shadow: var(--shadow); border:1px solid rgba(0,0,0,0.03);
    backdrop-filter: blur(4px);
  }
  nav button{
    padding:10px 14px; border-radius:10px; border:none; cursor:pointer;
    background: transparent; color:var(--wood); font-weight:700; transition: all .22s;
    font-family: "Sawarabi Mincho", serif;
  }
  nav button:hover{ transform:translateY(-3px); color:var(--accent-red); }

  main{max-width:1100px; margin:18px auto; padding:0 14px 80px;}

  section{ display:none; padding:18px; animation:fadeIn .45s; }
  section.active{ display:block; background:var(--card-bg); border-radius:12px; box-shadow:var(--shadow); border:1px solid rgba(0,0,0,0.04); }

  h2{ margin:0 0 12px; font-family:"Sawarabi Mincho", serif; color:var(--wood); }

  .kanaBtn{
    display:inline-block; margin:8px; padding:14px 12px; border-radius:12px;
    background:linear-gradient(180deg, #fff, #fcfbf9); box-shadow: 0 6px 14px rgba(0,0,0,0.08);
    cursor:pointer; border:1px solid rgba(0,0,0,0.03); text-align:center; font-size:1.05em; min-width:72px;
    font-weight:700; color:var(--muted-ink); transition:transform .18s, box-shadow .18s; white-space:pre-line;
    font-family:"Noto Serif JP", serif;
  }
  .kanaBtn:hover{ transform:translateY(-6px) rotate(-1deg); box-shadow: 0 12px 22px rgba(0,0,0,0.12); color:var(--accent-red); }

  .card{ display:inline-block; margin:8px; padding:12px; border-radius:10px; background:linear-gradient(180deg,#fff,#faf7f3); box-shadow:0 8px 18px rgba(0,0,0,.08); text-align:center; transition:.25s; width:160px; vertical-align:top; border:1px solid rgba(0,0,0,0.03); }
  .card:hover{ transform:translateY(-6px); box-shadow: 0 18px 32px rgba(0,0,0,0.12); }

  .quiz-box{ margin:14px auto; padding:16px; border-radius:12px; background:linear-gradient(180deg,#fff,#fcfbf9); box-shadow:0 10px 26px rgba(0,0,0,.06); max-width:720px; text-align:center; border:1px solid rgba(0,0,0,0.03); }

  .quiz-btn{ margin:6px; padding:8px 12px; border:none; border-radius:10px; cursor:pointer; background:linear-gradient(180deg,var(--accent-red), #9a2e1f); color:white; transition:.2s; font-weight:700; }
  .quiz-btn:hover{ transform:translateY(-4px); box-shadow:0 8px 18px rgba(168,58,42,0.14); }

  .subnav{ margin:10px 0; display:flex; gap:8px; justify-content:center; flex-wrap:wrap; }
  .subnav button{ background:transparent; color:var(--wood); padding:8px 10px; border-radius:8px; border:1px dashed rgba(0,0,0,0.04); cursor:pointer; transition:.2s; font-weight:600; }
  .subnav button:hover{ background: linear-gradient(180deg, rgba(255,255,255,0.6), rgba(255,255,255,0.4)); color:var(--accent-red); transform:translateY(-4px); }

  .search{ display:block; margin:10px auto 18px; max-width:420px; padding:10px 12px; border-radius:10px; border:1px solid rgba(0,0,0,0.06); box-shadow: inset 0 1px 0 rgba(255,255,255,0.6); }

  input[type="text"], select, input[type="number"]{ padding:8px; border-radius:6px; border:1px solid rgba(0,0,0,0.06); font-size:1em; background:transparent; }

  @media (max-width:900px){
    .card{ width:130px; padding:10px; } .kanaBtn{ padding:10px; font-size:1em; } .quiz-box{ max-width:92%; }
  }

  .scene-blur{
    position:fixed; left:0; top:0; width:100%; height:100%; pointer-events:none; opacity:0.06; mix-blend-mode:soft-light;
    background-image: radial-gradient( circle at 15% 20%, rgba(255,210,200,0.85), transparent 12%),
                      radial-gradient( circle at 85% 80%, rgba(220,170,130,0.75), transparent 14%);
  }

  
  #loading{
    position:fixed; inset:0; background:linear-gradient(180deg, rgba(10,8,6,0.85), rgba(10,8,6,0.6));
    display:flex; align-items:center; justify-content:center; z-index:9999; color:white; flex-direction:column;
    transition:opacity .5s ease, visibility .5s;
  }
  #loading.hidden{ opacity:0; visibility:hidden; pointer-events:none; }
  .loader-card{
    background: linear-gradient(180deg, rgba(255,250,245,0.06), rgba(255,250,245,0.02));
    padding:18px; border-radius:14px; border:1px solid rgba(255,255,255,0.06);
    display:flex; align-items:center; gap:14px; box-shadow: 0 16px 40px rgba(0,0,0,0.5);
  }
  .torii-svg{ width:86px; height:46px; display:block; filter: drop-shadow(0 6px 10px rgba(0,0,0,0.45)); }
  .loading-text{ font-family:"Sawarabi Mincho", serif; font-size:1.15rem; letter-spacing:0.6px; color: #fff9f3; }
  .flourish{ width:120px; height:4px; margin:6px auto 0; border-radius:4px; background:linear-gradient(90deg,var(--gold), rgba(255,255,255,0.1)); opacity:0.95;}

  @keyframes fadeIn { from{opacity:0;transform:translateY(6px)} to{opacity:1;transform:none} }
  @keyframes leafFall {
    0%{ transform: translateY(-10vh) rotate(0) translateX(0); opacity:0 }
    10%{ opacity:1 }
    100%{ transform: translateY(110vh) rotate(720deg) translateX(60vw); opacity:0 }
  }


  #toast{ position:fixed; left:50%; transform:translateX(-50%); bottom:28px; background:var(--wood); color:var(--bg-paper); padding:10px 14px; border-radius:10px; box-shadow:0 10px 30px rgba(0,0,0,0.3); display:none; z-index:9998; }

  .quiz-controls {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin: 10px 0;
    flex-wrap: wrap;
  }
  
  .mute-btn {
    padding: 6px 12px;
    border: none;
    border-radius: 8px;
    background: linear-gradient(180deg, #6c757d, #5a6268);
    color: white;
    cursor: pointer;
    transition: all 0.2s;
    font-size: 0.9em;
    font-weight: 600;
  }
  
  .mute-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  }
  
  .mute-btn.muted {
    background: linear-gradient(180deg, #28a745, #218838);
  }

</style>
</head>
<body>
<div id="loading" aria-hidden="false">
  <div class="loader-card" role="status" aria-live="polite">
    <svg class="torii-svg" viewBox="0 0 200 90" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
      <rect x="6" y="6" width="188" height="18" rx="6" ry="6" fill="#b83b24"/>
      <rect x="18" y="28" width="164" height="8" rx="4" fill="#8a2f20"/>
      <rect x="26" y="36" width="14" height="44" fill="#7a2f1b"/>
      <rect x="160" y="36" width="14" height="44" fill="#7a2f1b"/>
      <rect x="40" y="48" width="120" height="6" fill="#fff" opacity="0.06"/>
    </svg>

    <div>
      <div class="loading-text">Memasuki Taman Bahasa ‚Äî Sebentar...</div>
      <div class="flourish" aria-hidden="true"></div>
    </div>
  </div>
</div>

<div class="scene-blur" aria-hidden="true"></div>

<header>
  üéå Belajar Bahasa Jepang
  <span class="sub">Belajar merupakan kunci sukses</span>
</header>

<nav>
  <button onclick="showSection('hiraganaSec')">Hiragana</button>
  <button onclick="showSection('katakanaSec')">Katakana</button>
  <button onclick="showSection('kosakataSec')">Kosakata</button>
  <button onclick="showSection('quizSec')">Kuis</button>
  <button onclick="toggleMusic()" title="Mute / Unmute musik latar" id="musicBtn" style="margin-left:8px;padding:8px 10px;border-radius:8px;border:1px solid rgba(0,0,0,0.04);background:transparent;color:var(--wood)">üîà Musik</button>
</nav>

<main>
  <section id="hiraganaSec" class="active">
    <h2>Hiragana</h2>
    <div id="hiragana"></div>
  </section>

  <section id="katakanaSec">
    <h2>Katakana</h2>
    <div id="katakana"></div>
  </section>

  <section id="kosakataSec">
    <h2>Kosakata</h2>
    <div class="subnav">
      <button onclick="showSubKosakata('angka')">Angka</button>
      <button onclick="showSubKosakata('warna')">Warna</button>
      <button onclick="showSubKosakata('makanan')">Makanan/Minuman</button>
      <button onclick="showSubKosakata('salam')">Salam & Ungkapan</button>
      <button onclick="showSubKosakata('kegiatan')">Kegiatan</button>
      <button onclick="showSubKosakata('alat')">Alat Rumah Tangga</button>
      <button onclick="showSubKosakata('tempat')">Tempat & Transportasi</button>
      <button onclick="showSubKosakata('sehari')">Sehari-hari</button>
      <button onclick="showSubKosakata('kerja')">Kata Kerja</button>
      <button onclick="showSubKosakata('sifat')">Kata Sifat</button>
    </div>

    <input class="search" id="kosSearch" placeholder="Cari kosakata (ketik JP atau ID)..." oninput="filterKosakata()"/>
    <div id="angka" class="kosakata-category"></div>
    <div id="warna" class="kosakata-category" style="display:none"></div>
    <div id="makanan" class="kosakata-category" style="display:none"></div>
    <div id="salam" class="kosakata-category" style="display:none"></div>
    <div id="kegiatan" class="kosakata-category" style="display:none"></div>
    <div id="alat" class="kosakata-category" style="display:none"></div>
    <div id="tempat" class="kosakata-category" style="display:none"></div>
    <div id="sehari" class="kosakata-category" style="display:none"></div>
    <div id="kerja" class="kosakata-category" style="display:none"></div>
    <div id="sifat" class="kosakata-category" style="display:none"></div>
  </section>

  <section id="quizSec">
    <h2>Kuis ‚Äî Pilihan Ganda & Tes Menulis</h2>
    <div class="quiz-controls">
      <button class="mute-btn" id="quizMuteBtn" onclick="toggleQuizMute()">üîá Suara Kuis</button>
    </div>

    <div style="text-align:center; margin-bottom:10px;">
      <label>Jumlah Soal: <input type="number" id="quizCount" value="10" min="1" max="200" /></label>
      &nbsp;&nbsp;
      <label>Mode:
        <select id="quizMode">
          <option value="choice">Pilihan Ganda</option>
          <option value="writing">Tes Menulis</option>
        </select>
      </label>
      &nbsp;&nbsp;
      <label id="labelWriteType" style="display:inline-block;">
        Tulis:
        <select id="writeType">
          <option value="romaji">Romaji (e.g. ka)</option>
          <option value="japanese">Japanese (ketik kana/kanji)</option>
        </select>
      </label>
    </div>

    <div class="quiz-box">
      <div id="quizQuestion">Klik "Mulai Kuis"</div>
      <div id="quizOptions" style="margin-top:12px;"></div>

      <div id="quizWrite" style="margin-top:12px; display:none;">
        <input type="text" id="quizInput" placeholder="Ketik jawaban di sini..." />
        <div style="margin-top:8px;">
          <button class="quiz-btn" onclick="submitWritten()">Periksa Jawaban</button>
          <button class="quiz-btn" onclick="skipQuestion()">Lewati</button>
        </div>
      </div>

      <div style="margin-top:14px;">
        <button class="quiz-btn" onclick="startQuiz()">Mulai Kuis</button>
        <button class="quiz-btn" onclick="endQuiz()">Selesai Dulu</button>
      </div>

      <div id="quizResult" style="margin-top:10px; font-weight:bold;"></div>
      <div id="quizProgress" style="margin-top:6px;color:#555;"></div>
    </div>
  </section>
</main>

<div id="toast" role="status" aria-live="polite"></div>

<script>
let audioCtx = null;
let bgGain = null;
let bgOsc1 = null, bgOsc2 = null, bgLfo = null;
let musicOn = true;
let quizSoundMuted = false;

function ensureAudio(){
  if(!audioCtx) {
    audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  }
  if(!bgGain){
    bgGain = audioCtx.createGain();
    bgGain.gain.value = 0.0;
    bgGain.connect(audioCtx.destination);
  }
}

function startAmbientMusic(){
  try{
    ensureAudio();
    if(bgOsc1) return; 
    const now = audioCtx.currentTime;
    bgOsc1 = audioCtx.createOscillator();
    bgOsc2 = audioCtx.createOscillator();
    bgOsc1.type = 'sine';
    bgOsc2.type = 'triangle';
    bgOsc1.frequency.value = 220; 
    bgOsc2.frequency.value = 330; 
    const g1 = audioCtx.createGain();
    const g2 = audioCtx.createGain();
    g1.gain.value = 0.1; 
    g2.gain.value = 0.05;
    bgLfo = audioCtx.createOscillator();
    bgLfo.type = 'sine';
    bgLfo.frequency.value = 0.12;
    const lfoGain = audioCtx.createGain();
    lfoGain.gain.value = 0.0015;

    bgOsc1.connect(g1); g1.connect(bgGain);
    bgOsc2.connect(g2); g2.connect(bgGain);

    bgLfo.connect(lfoGain);
    lfoGain.connect(g1.gain);
    lfoGain.connect(g2.gain);

    bgOsc1.start(now);
    bgOsc2.start(now);
    bgLfo.start(now);
    bgGain.gain.cancelScheduledValues(now);
    bgGain.gain.setValueAtTime(0.0, now);
    bgGain.gain.linearRampToValueAtTime(0.09, now + 6.0);
    musicOn = true;
    updateMusicButton();
  }catch(e){ console.warn('startAmbientMusic failed', e); }
}

function stopAmbientMusic(){
  try{
    if(!bgOsc1 && !bgOsc2) return;
    const now = audioCtx.currentTime;
    bgGain.gain.cancelScheduledValues(now);
    bgGain.gain.setValueAtTime(bgGain.gain.value, now);
    bgGain.gain.linearRampToValueAtTime(0.0, now + 1.2);
    setTimeout(()=> {
      try{
        if(bgOsc1){ bgOsc1.stop(); bgOsc1.disconnect(); bgOsc1 = null; }
        if(bgOsc2){ bgOsc2.stop(); bgOsc2.disconnect(); bgOsc2 = null; }
        if(bgLfo){ bgLfo.stop(); bgLfo.disconnect(); bgLfo = null; }
      }catch(e){}
    }, 1400);
    musicOn = false;
    updateMusicButton();
  }catch(e){ console.warn('stopAmbientMusic failed', e); }
}

function toggleMusic(){
  try{
    if(!audioCtx) ensureAudio();
    if(audioCtx.state === 'suspended') audioCtx.resume();
    if(musicOn) stopAmbientMusic(); else startAmbientMusic();
  }catch(e){ console.warn('toggleMusic', e); }
}

function updateMusicButton(){
  const btn = document.getElementById('musicBtn');
  if(!btn) return;
  btn.innerText = musicOn ? 'üîà Musik (On)' : 'üîá Musik (Off)';
}

function playPluck(){
  if (quizSoundMuted) return; 
  try{
    ensureAudio();
    const now = audioCtx.currentTime;
    const o = audioCtx.createOscillator();
    const g = audioCtx.createGain();
    o.type = 'sine';
    o.frequency.setValueAtTime(660, now);
    o.frequency.exponentialRampToValueAtTime(240, now + 0.18);
    g.gain.setValueAtTime(0.0001, now);
    g.gain.exponentialRampToValueAtTime(0.16, now + 0.01);
    g.gain.exponentialRampToValueAtTime(0.0001, now + 0.5);
    o.connect(g); g.connect(audioCtx.destination);
    o.start(now); o.stop(now + 0.7);
  }catch(e){}
}

function playBell(){
  if (quizSoundMuted) return; 
  try{
    ensureAudio();
    const now = audioCtx.currentTime;
    const o = audioCtx.createOscillator();
    const g = audioCtx.createGain();
    o.type = 'triangle';
    o.frequency.setValueAtTime(880, now);
    o.frequency.exponentialRampToValueAtTime(660, now + 0.8);
    g.gain.setValueAtTime(0.0001, now);
    g.gain.exponentialRampToValueAtTime(0.19, now + 0.02);
    g.gain.exponentialRampToValueAtTime(0.0001, now + 1.6);
    o.connect(g); g.connect(audioCtx.destination);
    o.start(now); o.stop(now + 1.7);
  }catch(e){}
}

function toggleQuizMute() {
  quizSoundMuted = !quizSoundMuted;
  const muteBtn = document.getElementById('quizMuteBtn');
  
  if (quizSoundMuted) {
    muteBtn.innerHTML = 'üîä Suara Kuis';
    muteBtn.classList.add('muted');
    showToast('üîá Suara kuis dimatikan');
  } else {
    muteBtn.innerHTML = 'üîá Suara Kuis';
    muteBtn.classList.remove('muted');
    showToast('üîä Suara kuis diaktifkan');
  }
}

window.addEventListener('error', function (e) {
  try { console.error('Runtime error caught:', e.message, e.error); } catch (ex) {}
  try { alert('Terjadi error: '+(e && e.message ? e.message : 'Unknown error')+"\nCek konsol untuk detail."); } catch (ex) {}
});
window.addEventListener('unhandledrejection', function (ev) {
  try { console.error('Unhandled promise rejection:', ev.reason); } catch (ex) {}
});

function getBestJPVoice() {
  const voices = speechSynthesis.getVoices();
  let v = voices.find(x => x.lang && x.lang.toLowerCase().startsWith('ja') && x.name.toLowerCase().includes('google'));
  if (!v) v = voices.find(x => x.lang && x.lang.toLowerCase().startsWith('ja'));
  if (!v) v = voices.find(x => x.lang && x.lang.toLowerCase().includes('japanese'));
  return v || null;
}
let cachedJPVoice = null;
function playSound(text, lang="ja-JP") {
  if (quizSoundMuted) return;
  if ('speechSynthesis' in window) {
    try{
      speechSynthesis.cancel();
      const u = new SpeechSynthesisUtterance(text);
      u.lang = lang;
      if (cachedJPVoice) u.voice = cachedJPVoice;
      else {
        const jp = getBestJPVoice();
        if (jp) { cachedJPVoice = jp; u.voice = jp; }
      }
      u.pitch = 1.0; u.rate = 0.95; u.volume = 1.0;
      speechSynthesis.speak(u);
      try{ playPluck(); }catch(e){}
      return;
    }catch(e){}
  }
  try{ playPluck(); }catch(e){}
}
const hiragana=[
  {k:'„ÅÇ',r:'a'},{k:'„ÅÑ',r:'i'},{k:'„ÅÜ',r:'u'},{k:'„Åà',r:'e'},{k:'„Åä',r:'o'},
  {k:'„Åã',r:'ka'},{k:'„Åç',r:'ki'},{k:'„Åè',r:'ku'},{k:'„Åë',r:'ke'},{k:'„Åì',r:'ko'},
  {k:'„Åï',r:'sa'},{k:'„Åó',r:'shi'},{k:'„Åô',r:'su'},{k:'„Åõ',r:'se'},{k:'„Åù',r:'so'},
  {k:'„Åü',r:'ta'},{k:'„Å°',r:'chi'},{k:'„Å§',r:'tsu'},{k:'„Å¶',r:'te'},{k:'„Å®',r:'to'},
  {k:'„Å™',r:'na'},{k:'„Å´',r:'ni'},{k:'„Å¨',r:'nu'},{k:'„Å≠',r:'ne'},{k:'„ÅÆ',r:'no'},
  {k:'„ÅØ',r:'ha'},{k:'„Å≤',r:'hi'},{k:'„Åµ',r:'fu'},{k:'„Å∏',r:'he'},{k:'„Åª',r:'ho'},
  {k:'„Åæ',r:'ma'},{k:'„Åø',r:'mi'},{k:'„ÇÄ',r:'mu'},{k:'„ÇÅ',r:'me'},{k:'„ÇÇ',r:'mo'},
  {k:'„ÇÑ',r:'ya'},{k:'„ÇÜ',r:'yu'},{k:'„Çà',r:'yo'},
  {k:'„Çâ',r:'ra'},{k:'„Çä',r:'ri'},{k:'„Çã',r:'ru'},{k:'„Çå',r:'re'},{k:'„Çç',r:'ro'},
  {k:'„Çè',r:'wa'},{k:'„Çí',r:'wo'},{k:'„Çì',r:'n'},
  {k:'„Åå',r:'ga'},{k:'„Åé',r:'gi'},{k:'„Åê',r:'gu'},{k:'„Åí',r:'ge'},{k:'„Åî',r:'go'},
  {k:'„Åñ',r:'za'},{k:'„Åò',r:'ji'},{k:'„Åö',r:'zu'},{k:'„Åú',r:'ze'},{k:'„Åû',r:'zo'},
  {k:'„Å†',r:'da'},{k:'„Å¢',r:'ji'},{k:'„Å•',r:'zu'},{k:'„Åß',r:'de'},{k:'„Å©',r:'do'},
  {k:'„Å∞',r:'ba'},{k:'„Å≥',r:'bi'},{k:'„Å∂',r:'bu'},{k:'„Åπ',r:'be'},{k:'„Åº',r:'bo'},
  {k:'„Å±',r:'pa'},{k:'„Å¥',r:'pi'},{k:'„Å∑',r:'pu'},{k:'„Å∫',r:'pe'},{k:'„ÅΩ',r:'po'},
  {k:'„Åç„ÇÉ',r:'kya'},{k:'„Åç„ÇÖ',r:'kyu'},{k:'„Åç„Çá',r:'kyo'},
  {k:'„Åó„ÇÉ',r:'sha'},{k:'„Åó„ÇÖ',r:'shu'},{k:'„Åó„Çá',r:'sho'},
  {k:'„Å°„ÇÉ',r:'cha'},{k:'„Å°„ÇÖ',r:'chu'},{k:'„Å°„Çá',r:'cho'},
  {k:'„Å´„ÇÉ',r:'nya'},{k:'„Å´„ÇÖ',r:'nyu'},{k:'„Å´„Çá',r:'nyo'},
  {k:'„Å≤„ÇÉ',r:'hya'},{k:'„Å≤„ÇÖ',r:'hyu'},{k:'„Å≤„Çá',r:'hyo'},
  {k:'„Åø„ÇÉ',r:'mya'},{k:'„Åø„ÇÖ',r:'myu'},{k:'„Åø„Çá',r:'myo'},
  {k:'„Çä„ÇÉ',r:'rya'},{k:'„Çä„ÇÖ',r:'ryu'},{k:'„Çä„Çá',r:'ryo'},
  {k:'„Åé„ÇÉ',r:'gya'},{k:'„Åé„ÇÖ',r:'gyu'},{k:'„Åé„Çá',r:'gyo'},
  {k:'„Åò„ÇÉ',r:'ja'},{k:'„Åò„ÇÖ',r:'ju'},{k:'„Åò„Çá',r:'jo'},
  {k:'„Å¢„ÇÉ',r:'ja'},{k:'„Å¢„ÇÖ',r:'ju'},{k:'„Å¢„Çá',r:'jo'},
  {k:'„Å≥„ÇÉ',r:'bya'},{k:'„Å≥„ÇÖ',r:'byu'},{k:'„Å≥„Çá',r:'byo'},
  {k:'„Å¥„ÇÉ',r:'pya'},{k:'„Å¥„ÇÖ',r:'pyu'},{k:'„Å¥„Çá',r:'pyo'}
];
const katakana=[
  {k:'„Ç¢',r:'a'},{k:'„Ç§',r:'i'},{k:'„Ç¶',r:'u'},{k:'„Ç®',r:'e'},{k:'„Ç™',r:'o'},
  {k:'„Ç´',r:'ka'},{k:'„Ç≠',r:'ki'},{k:'„ÇØ',r:'ku'},{k:'„Ç±',r:'ke'},{k:'„Ç≥',r:'ko'},
  {k:'„Çµ',r:'sa'},{k:'„Ç∑',r:'shi'},{k:'„Çπ',r:'su'},{k:'„Çª',r:'se'},{k:'„ÇΩ',r:'so'},
  {k:'„Çø',r:'ta'},{k:'„ÉÅ',r:'chi'},{k:'„ÉÑ',r:'tsu'},{k:'„ÉÜ',r:'te'},{k:'„Éà',r:'to'},
  {k:'„Éä',r:'na'},{k:'„Éã',r:'ni'},{k:'„Éå',r:'nu'},{k:'„Éç',r:'ne'},{k:'„Éé',r:'no'},
  {k:'„Éè',r:'ha'},{k:'„Éí',r:'hi'},{k:'„Éï',r:'fu'},{k:'„Éò',r:'he'},{k:'„Éõ',r:'ho'},
  {k:'„Éû',r:'ma'},{k:'„Éü',r:'mi'},{k:'„É†',r:'mu'},{k:'„É°',r:'me'},{k:'„É¢',r:'mo'},
  {k:'„É§',r:'ya'},{k:'„É¶',r:'yu'},{k:'„É®',r:'yo'},
  {k:'„É©',r:'ra'},{k:'„É™',r:'ri'},{k:'„É´',r:'ru'},{k:'„É¨',r:'re'},{k:'„É≠',r:'ro'},
  {k:'„ÉØ',r:'wa'},{k:'„É≤',r:'wo'},{k:'„É≥',r:'n'},
  {k:'„Ç¨',r:'ga'},{k:'„ÇÆ',r:'gi'},{k:'„Ç∞',r:'gu'},{k:'„Ç≤',r:'ge'},{k:'„Ç¥',r:'go'},
  {k:'„Ç∂',r:'za'},{k:'„Ç∏',r:'ji'},{k:'„Ç∫',r:'zu'},{k:'„Çº',r:'ze'},{k:'„Çæ',r:'zo'},
  {k:'„ÉÄ',r:'da'},{k:'„ÉÇ',r:'ji'},{k:'„ÉÖ',r:'zu'},{k:'„Éá',r:'de'},{k:'„Éâ',r:'do'},
  {k:'„Éê',r:'ba'},{k:'„Éì',r:'bi'},{k:'„Éñ',r:'bu'},{k:'„Éô',r:'be'},{k:'„Éú',r:'bo'},
  {k:'„Éë',r:'pa'},{k:'„Éî',r:'pi'},{k:'„Éó',r:'pu'},{k:'„Éö',r:'pe'},{k:'„Éù',r:'po'},
  {k:'„Ç≠„É£',r:'kya'},{k:'„Ç≠„É•',r:'kyu'},{k:'„Ç≠„Éß',r:'kyo'},
  {k:'„Ç∑„É£',r:'sha'},{k:'„Ç∑„É•',r:'shu'},{k:'„Ç∑„Éß',r:'sho'},
  {k:'„ÉÅ„É£',r:'cha'},{k:'„ÉÅ„É•',r:'chu'},{k:'„ÉÅ„Éß',r:'cho'},
  {k:'„Éã„É£',r:'nya'},{k:'„Éã„É•',r:'nyu'},{k:'„Éã„Éß',r:'nyo'},
  {k:'„Éí„É£',r:'hya'},{k:'„Éí„É•',r:'hyu'},{k:'„Éí„Éß',r:'hyo'},
  {k:'„Éü„É£',r:'mya'},{k:'„Éü„É•',r:'myu'},{k:'„Éü„Éß',r:'myo'},
  {k:'„É™„É£',r:'rya'},{k:'„É™„É•',r:'ryu'},{k:'„É™„Éß',r:'ryo'},
  {k:'„ÇÆ„É£',r:'gya'},{k:'„ÇÆ„É•',r:'gyu'},{k:'„ÇÆ„Éß',r:'gyo'},
  {k:'„Ç∏„É£',r:'ja'},{k:'„Ç∏„É•',r:'ju'},{k:'„Ç∏„Éß',r:'jo'},
  {k:'„ÉÇ„É£',r:'ja'},{k:'„ÉÇ„É•',r:'ju'},{k:'„ÉÇ„Éß',r:'jo'},
  {k:'„Éì„É£',r:'bya'},{k:'„Éì„É•',r:'byu'},{k:'„Éì„Éß',r:'byo'},
  {k:'„Éî„É£',r:'pya'},{k:'„Éî„É•',r:'pyu'},{k:'„Éî„Éß',r:'pyo'}
];
const kosakataData = {
  angka:[
    {jp:"‰∏Ä",id:"Satu"},{jp:"‰∫å",id:"Dua"},{jp:"‰∏â",id:"Tiga"},{jp:"Âõõ",id:"Empat"},{jp:"‰∫î",id:"Lima"},
    {jp:"ÂÖ≠",id:"Enam"},{jp:"‰∏É",id:"Tujuh"},{jp:"ÂÖ´",id:"Delapan"},{jp:"‰πù",id:"Sembilan"},{jp:"ÂçÅ",id:"Sepuluh"},
    {jp:"ÂçÅ‰∏Ä",id:"Sebelas"},{jp:"ÂçÅ‰∫å",id:"Dua Belas"},{jp:"ÂçÅ‰∏â",id:"Tiga Belas"},{jp:"ÂçÅÂõõ",id:"Empat Belas"},{jp:"ÂçÅ‰∫î",id:"Lima Belas"},
    {jp:"ÂçÅÂÖ≠",id:"Enam Belas"},{jp:"ÂçÅ‰∏É",id:"Tujuh Belas"},{jp:"ÂçÅÂÖ´",id:"Delapan Belas"},{jp:"ÂçÅ‰πù",id:"Sembilan Belas"},{jp:"‰∫åÂçÅ",id:"Dua Puluh"},
    {jp:"‰∫åÂçÅ‰∏Ä",id:"Dua Puluh Satu"},{jp:"‰∫åÂçÅ‰∫å",id:"Dua Puluh Dua"},{jp:"‰∫åÂçÅ‰∏â",id:"Dua Puluh Tiga"},{jp:"‰∫åÂçÅÂõõ",id:"Dua Puluh Empat"},{jp:"‰∫åÂçÅ‰∫î",id:"Dua Puluh Lima"},
    {jp:"‰∫åÂçÅÂÖ≠",id:"Dua Puluh Enam"},{jp:"‰∫åÂçÅ‰∏É",id:"Dua Puluh Tujuh"},{jp:"‰∫åÂçÅÂÖ´",id:"Dua Puluh Delapan"},{jp:"‰∫åÂçÅ‰πù",id:"Dua Puluh Sembilan"},{jp:"‰∏âÂçÅ",id:"Tiga Puluh"},
    {jp:"‰∏âÂçÅ‰∏Ä",id:"Tiga Puluh Satu"},{jp:"‰∏âÂçÅ‰∫å",id:"Tiga Puluh Dua"},{jp:"‰∏âÂçÅ‰∏â",id:"Tiga Puluh Tiga"},{jp:"‰∏âÂçÅÂõõ",id:"Tiga Puluh Empat"},{jp:"‰∏âÂçÅ‰∫î",id:"Tiga Puluh Lima"},
    {jp:"‰∏âÂçÅÂÖ≠",id:"Tiga Puluh Enam"},{jp:"‰∏âÂçÅ‰∏É",id:"Tiga Puluh Tujuh"},{jp:"‰∏âÂçÅÂÖ´",id:"Tiga Puluh Delapan"},{jp:"‰∏âÂçÅ‰πù",id:"Tiga Puluh Sembilan"},{jp:"ÂõõÂçÅ",id:"Empat Puluh"},
    {jp:"ÂõõÂçÅ‰∏Ä",id:"Empat Puluh Satu"},{jp:"ÂõõÂçÅ‰∫å",id:"Empat Puluh Dua"},{jp:"ÂõõÂçÅ‰∏â",id:"Empat Puluh Tiga"},{jp:"ÂõõÂçÅÂõõ",id:"Empat Puluh Empat"},{jp:"ÂõõÂçÅ‰∫î",id:"Empat Puluh Lima"},
    {jp:"ÂõõÂçÅÂÖ≠",id:"Empat Puluh Enam"},{jp:"ÂõõÂçÅ‰∏É",id:"Empat Puluh Tujuh"},{jp:"ÂõõÂçÅÂÖ´",id:"Empat Puluh Delapan"},{jp:"ÂõõÂçÅ‰πù",id:"Empat Puluh Sembilan"},{jp:"‰∫îÂçÅ",id:"Lima Puluh"}
  ],
  warna:[
    {jp:"Ëµ§",id:"Merah"},{jp:"Èùí",id:"Biru"},{jp:"Á∑ë",id:"Hijau"},{jp:"ÈªÑ",id:"Kuning"},{jp:"Èªí",id:"Hitam"},
    {jp:"ÁôΩ",id:"Putih"},{jp:"Á¥´",id:"Ungu"},{jp:"„Éî„É≥„ÇØ",id:"Merah Muda"},{jp:"Ê©ô",id:"Oranye"},{jp:"Ëå∂Ëâ≤",id:"Coklat"},
    {jp:"ÁÅ∞Ëâ≤",id:"Abu-abu"},{jp:"Ê∞¥Ëâ≤",id:"Biru Muda"},{jp:"ÈáëËâ≤",id:"Emas"},{jp:"ÈäÄËâ≤",id:"Perak"},{jp:"„Éô„Éº„Ç∏„É•",id:"Beige"},
    {jp:"Á¥∫",id:"Navy"},{jp:"ÈªÑÁ∑ë",id:"Hijau Kuning"},{jp:"ËñÑÁ¥´",id:"Ungu Muda"},{jp:"Ëµ§Á¥´",id:"Magenta"},{jp:"ÈùíÁ∑ë",id:"Cyan"},
    {jp:"Ê°ÉËâ≤",id:"Peach"},{jp:"Ê∑±Á∑ë",id:"Hijau Tua"},{jp:"ÈªíÁ¥´",id:"Hitam Ungu"},{jp:"„ÇØ„É™„Éº„É†",id:"Cream"},{jp:"„É©„Ç§„É†",id:"Lime"},
    {jp:"ËóçËâ≤",id:"Indigo"},{jp:"Ê©ôËµ§",id:"Oranye Merah"},{jp:"Ëå∂Á¥Ö",id:"Coklat Merah"},{jp:"Á©∫Ëâ≤",id:"Sky Blue"},{jp:"Ëó§Ëâ≤",id:"Wisteria"},
    {jp:"ÈùíÁÅ∞",id:"Biru Abu"},{jp:"Êú±Ëâ≤",id:"Vermilion"},{jp:"ËåúËâ≤",id:"Merah Tua"},{jp:"Ê°úËâ≤",id:"Sakura"},{jp:"Ëã•ËçâËâ≤",id:"Hijau Muda"},
    {jp:"È∂ØËâ≤",id:"Olive"},{jp:"Ëè´Ëâ≤",id:"Violet"},{jp:"Á¥∫Á¢ß",id:"Deep Blue"},{jp:"Ê†óËâ≤",id:"Chestnut"},{jp:"Èº†Ëâ≤",id:"Grey"},
    {jp:"Êµ∑Ëâ≤",id:"Sea Blue"},{jp:"Á∑ãËâ≤",id:"Scarlet"},{jp:"Áê•ÁèÄËâ≤",id:"Amber"},{jp:"ÁèäÁëöËâ≤",id:"Coral"},{jp:"ËóçÈº†",id:"Indigo Grey"},
    {jp:"ËêåÈªÑ",id:"Yellow Green"},{jp:"ÊµÖËë±Ëâ≤",id:"Light Teal"},{jp:"ÊµÖÁ¥´",id:"Light Purple"},{jp:"Áæ§Èùí",id:"Ultramarine"},{jp:"Á¥ÖËâ≤",id:"Red"}
  ],
  makanan:[
    {jp:"„ÅîÈ£Ø",id:"Nasi"},{jp:"„Éë„É≥",id:"Roti"},{jp:"È≠ö",id:"Ikan"},{jp:"ËÇâ",id:"Daging"},{jp:"ÈáéËèú",id:"Sayur"},
    {jp:"ÊûúÁâ©",id:"Buah"},{jp:"Âçµ",id:"Telur"},{jp:"Áâõ‰π≥",id:"Susu"},{jp:"„ÉÅ„Éº„Ç∫",id:"Keju"},{jp:"„ÅäËå∂",id:"Teh"},
    {jp:"„Ç≥„Éº„Éí„Éº",id:"Kopi"},{jp:"Ê∞¥",id:"Air"},{jp:"Âë≥ÂôåÊ±Å",id:"Sup Miso"},{jp:"„É©„Éº„É°„É≥",id:"Ramen"},{jp:"ÂØøÂè∏",id:"Sushi"},
    {jp:"Â§©„Å∑„Çâ",id:"Tempura"},{jp:"„Åù„Å∞",id:"Soba"},{jp:"„ÅÜ„Å©„Çì",id:"Udon"},{jp:"ÁÑº„ÅçÈ≥•",id:"Yakitori"},{jp:"„Ç´„É¨„Éº",id:"Kari"},
    {jp:"„Éë„É≥„Ç±„Éº„Ç≠",id:"Pancake"},{jp:"„Ç±„Éº„Ç≠",id:"Kue"},{jp:"„Ç¢„Ç§„Çπ„ÇØ„É™„Éº„É†",id:"Es Krim"},{jp:"„Ç∏„É•„Éº„Çπ",id:"Jus"},{jp:"È≠ö‰ªã",id:"Seafood"},
    {jp:"„Çµ„É©„ÉÄ",id:"Salad"},{jp:"Âë≥Âôå",id:"Miso"},{jp:"ÈÜ§Ê≤π",id:"Kecap Jepang"},{jp:"Êµ∑Ëãî",id:"Nori"},{jp:"Á¥çË±Ü",id:"Natto"},
    {jp:"Ë±ÜËÖê",id:"Tahu"},{jp:"È∂èËÇâ",id:"Daging Ayam"},{jp:"Ë±öËÇâ",id:"Daging Babi"},{jp:"ÁâõËÇâ",id:"Daging Sapi"},{jp:"„ÇΩ„Éº„Çª„Éº„Ç∏",id:"Sosis"},
    {jp:"„Éè„É†",id:"Ham"},{jp:"„É®„Éº„Ç∞„É´„Éà",id:"Yogurt"},{jp:"„Éê„Çø„Éº",id:"Mentega"},{jp:"ÈÜ§Ê≤π„É©„Éº„É°„É≥",id:"Ramen Kecap"},{jp:"Âë≥Âôå„É©„Éº„É°„É≥",id:"Ramen Miso"},
    {jp:"„ÅäÂ•Ω„ÅøÁÑº„Åç",id:"Okonomiyaki"},{jp:"„Åü„ÅìÁÑº„Åç",id:"Takoyaki"},{jp:"„Ç´„ÉÑ‰∏º",id:"Katsudon"},{jp:"ÂºÅÂΩì",id:"Bento"},{jp:"„Åä„Å´„Åé„Çä",id:"Onigiri"},
    {jp:"ÁÖÆÁâ©",id:"Nimono"},{jp:"ÁÑº„ÅçÈ≠ö",id:"Ikan Bakar"},{jp:"Âà∫Ë∫´",id:"Sashimi"},{jp:"Èçã",id:"Nabe"},{jp:"„ÅäËèìÂ≠ê",id:"Camilan"}
  ],
  salam:[
    {jp:"„Åì„Çì„Å´„Å°„ÅØ",id:"Halo"},{jp:"„Åä„ÅØ„Çà„ÅÜ",id:"Selamat Pagi"},{jp:"„Åì„Çì„Å∞„Çì„ÅØ",id:"Selamat Malam"},{jp:"„Åï„Çà„ÅÜ„Å™„Çâ",id:"Selamat Tinggal"},{jp:"„ÅÇ„Çä„Åå„Å®„ÅÜ",id:"Terima Kasih"},
    {jp:"„Åô„Åø„Åæ„Åõ„Çì",id:"Permisi/Maaf"},{jp:"„ÅäÈ°ò„ÅÑ„Åó„Åæ„Åô",id:"Tolong"},{jp:"„ÅØ„ÅÑ",id:"Ya"},{jp:"„ÅÑ„ÅÑ„Åà",id:"Tidak"},{jp:"„Åä„ÇÑ„Åô„Åø",id:"Selamat Tidur"},
    {jp:"„Åä„ÇÅ„Åß„Å®„ÅÜ",id:"Selamat"},{jp:"„ÅØ„Åò„ÇÅ„Åæ„Åó„Å¶",id:"Senang Bertemu"},{jp:"„Çà„Çç„Åó„Åè",id:"Senang Bekerja Sama"},{jp:"„Å©„ÅÜ„ÅÑ„Åü„Åó„Åæ„Åó„Å¶",id:"Sama-sama"},{jp:"„Åî„ÇÅ„Çì„Å™„Åï„ÅÑ",id:"Maaf"},
    {jp:"„ÅÑ„Å£„Å¶„Åç„Åæ„Åô",id:"Saya Pergi"},{jp:"„ÅÑ„Å£„Å¶„Çâ„Å£„Åó„ÇÉ„ÅÑ",id:"Hati-hati"},{jp:"„Åü„Å†„ÅÑ„Åæ",id:"Saya Pulang"},{jp:"„Åä„Åã„Åà„Çä",id:"Selamat Pulang"},{jp:"„ÅÑ„Åü„Å†„Åç„Åæ„Åô",id:"Selamat Makan"},
    {jp:"„Åî„Å°„Åù„ÅÜ„Åï„Åæ",id:"Terima Kasih Makanannya"},{jp:"„ÇÇ„Åó„ÇÇ„Åó",id:"Halo (telepon)"},{jp:"„ÅäÂ§ß‰∫ã„Å´",id:"Semoga Cepat Sembuh"},{jp:"„Åä‰πÖ„Åó„Å∂„Çä",id:"Lama Tidak Bertemu"},{jp:"„Çà„Çç„Åó„Åè„ÅäÈ°ò„ÅÑ„Åó„Åæ„Åô",id:"Mohon Kerjasamanya"},
    {jp:"Â§±Á§º„Åó„Åæ„Åô",id:"Permisi"},{jp:"„ÅäÁñ≤„ÇåÊßò",id:"Kerja Bagus"},{jp:"È†ëÂºµ„Å£„Å¶",id:"Semangat"},{jp:"Ê∞ó„Çí„Å§„Åë„Å¶",id:"Hati-hati"},{jp:"Ë°å„Å£„Å¶„Åç„Åæ„Åô",id:"Saya Berangkat"},
    {jp:"Ë°å„Å£„Å¶„Çâ„Å£„Åó„ÇÉ„ÅÑ",id:"Hati-hati"},{jp:"„Åü„Å†„ÅÑ„ÅæÊàª„Çä„Åæ„Åó„Åü",id:"Saya Kembali"},{jp:"„Åî„ÇÅ„Çì„Åè„Å†„Åï„ÅÑ",id:"Permisi Masuk"},{jp:"„ÅÑ„Åã„Åå„Åß„Åô„Åã",id:"Bagaimana?"},{jp:"„Åä‰πÖ„Åó„Å∂„Çä„Åß„Åô",id:"Lama Tidak Bertemu"},
    {jp:"„Åä„ÇÅ„Åß„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô",id:"Selamat (resmi)"},{jp:"„ÅäË™ïÁîüÊó•„Åä„ÇÅ„Åß„Å®„ÅÜ",id:"Selamat Ulang Tahun"},{jp:"„ÅäÁ•ù„ÅÑ„Åó„Åæ„Åô",id:"Selamat"},{jp:"„Çà„Çç„Åó„Åè„Å≠",id:"Senang Berkenalan"},{jp:"Â§±Á§º„Åó„Åæ„Åó„Åü",id:"Maafkan Saya"},
    {jp:"„ÅäÈÇ™È≠î„Åó„Åæ„Åô",id:"Permisi Mengganggu"},{jp:"„ÅîÊ©üÂ´å„ÅÑ„Åã„Åå",id:"Apa Kabar"},{jp:"„Å©„ÅÜ„Åû",id:"Silahkan"},{jp:"„ÅÑ„Çâ„Å£„Åó„ÇÉ„ÅÑ„Åæ„Åõ",id:"Selamat Datang"},{jp:"„ÅäÂπ∏„Åõ„Å´",id:"Semoga Bahagia"}
  ],
  kegiatan:[
    {jp:"Ëµ∞„Çã",id:"Berlari"},{jp:"Ê≠©„Åè",id:"Berjalan"},{jp:"Ê≥≥„Åê",id:"Berenang"},{jp:"Ë™≠„ÇÄ",id:"Membaca"},{jp:"Êõ∏„Åè",id:"Menulis"},
    {jp:"È£ü„Åπ„Çã",id:"Makan"},{jp:"È£≤„ÇÄ",id:"Minum"},{jp:"ÂØù„Çã",id:"Tidur"},{jp:"Ëµ∑„Åç„Çã",id:"Bangun"},{jp:"ÈÅä„Å∂",id:"Bermain"},
    {jp:"Ê≠å„ÅÜ",id:"Bernyanyi"},{jp:"Ë∏ä„Çã",id:"Menari"},{jp:"ËÅû„Åè",id:"Mendengar"},{jp:"Ë©±„Åô",id:"Berbicara"},{jp:"Ë¶ã„Çã",id:"Melihat"},
    {jp:"ÊéÉÈô§„Åô„Çã",id:"Membersihkan"},{jp:"Ê¥ó„ÅÜ",id:"Mencuci"},{jp:"Ë≤∑„ÅÜ",id:"Membeli"},{jp:"Â£≤„Çã",id:"Menjual"},{jp:"‰Ωú„Çã",id:"Membuat"},
    {jp:"Êèè„Åè",id:"Menggambar"},{jp:"ÊíÆ„Çã",id:"Mengambil Foto"},{jp:"ÂãâÂº∑„Åô„Çã",id:"Belajar"},{jp:"ÂÉç„Åè",id:"Bekerja"},{jp:"‰ºë„ÇÄ",id:"Beristirahat"},
    {jp:"ÈÅãËª¢„Åô„Çã",id:"Mengemudi"},{jp:"ÊéÉÈô§Ê©ü„Çí„Åã„Åë„Çã",id:"Menyedot Debu"},{jp:"ÊñôÁêÜ„Åô„Çã",id:"Memasak"},{jp:"Ê¥óÊøØ„Åô„Çã",id:"Mencuci Pakaian"},{jp:"ÈÅãÂãï„Åô„Çã",id:"Berolahraga"},
    {jp:"Êâã‰ºù„ÅÜ",id:"Membantu"},{jp:"Ë©±„ÅóÂêà„ÅÜ",id:"Diskusi"},{jp:"ËÅû„ÅçÂèñ„Çã",id:"Mendengarkan dengan Fokus"},{jp:"Ê≠©„ÅçÂõû„Çã",id:"Berjalan-jalan"},{jp:"Ê≥≥„ÅéÂõû„Çã",id:"Berenang di Sekitar"},
    {jp:"ÈõÜ„ÇÅ„Çã",id:"Mengumpulkan"},{jp:"Êé¢„Åô",id:"Mencari"},{jp:"Áôª„Çã",id:"Mendaki"},{jp:"Èôç„Çä„Çã",id:"Turun"},{jp:"È£õ„Å∂",id:"Terbang"},
    {jp:"ÈÅã„Å∂",id:"Mengangkut"},{jp:"Á£®„Åè",id:"Menggosok"},{jp:"ÊéÉ„Åè",id:"Menyapu"},{jp:"È£æ„Çã",id:"Menghias"},{jp:"ÊèèÂÜô„Åô„Çã",id:"Menjabarkan"},
    {jp:"ÈÅä„Å≥„Å´Ë°å„Åè",id:"Pergi Bermain"},{jp:"Êï£Ê≠©„Åô„Çã",id:"Jalan-jalan santai"},{jp:"Á∑¥Áøí„Åô„Çã",id:"Latihan"},{jp:"Ë©¶„Åô",id:"Mencoba"},{jp:"Ë™¨Êòé„Åô„Çã",id:"Menjelaskan"}
  ],
  alat:[
    {jp:"„Éö„É≥",id:"Pulpen"},{jp:"„Éé„Éº„Éà",id:"Buku Catatan"},{jp:"ÈâõÁ≠Ü",id:"Pensil"},{jp:"Ê∂à„Åó„Ç¥„É†",id:"Penghapus"},{jp:"ÂÆöË¶è",id:"Penggaris"},
    {jp:"„ÅØ„Åï„Åø",id:"Gunting"},{jp:"„ÅÆ„Çä",id:"Lem"},{jp:"„Ç´„ÉÉ„Çø„Éº",id:"Cutter"},{jp:"Á≠Ü",id:"Kuasa"},{jp:"Á¥ô",id:"Kertas"},
    {jp:"Êú∫",id:"Meja"},{jp:"Ê§ÖÂ≠ê",id:"Kursi"},{jp:"ÊôÇË®à",id:"Jam"},{jp:"ÈõªË©±",id:"Telepon"},{jp:"Èçµ",id:"Kunci"},
    {jp:"„Éê„ÉÉ„Ç∞",id:"Tas"},{jp:"Ë≤°Â∏É",id:"Dompet"},{jp:"ÂÇò",id:"Payung"},{jp:"ÁúºÈè°",id:"Kacamata"},{jp:"Â∏ΩÂ≠ê",id:"Topi"},
    {jp:"Èù¥",id:"Sepatu"},{jp:"Êúç",id:"Pakaian"},{jp:"ÊôÇË®à",id:"Jam Tangan"},{jp:"„Ç´„É°„É©",id:"Kamera"},{jp:"Ëá™Ëª¢Ëªä",id:"Sepeda"},
    {jp:"Ëªä",id:"Mobil"},{jp:"„Éê„Ç§„ÇØ",id:"Motor"},{jp:"ÈõªÂçì",id:"Kalkulator"},{jp:"„Éë„ÇΩ„Ç≥„É≥",id:"Komputer"},{jp:"„Ç§„É§„Éõ„É≥",id:"Earphone"},
    {jp:"„Çπ„Éî„Éº„Ç´„Éº",id:"Speaker"},{jp:"„Éû„Ç§„ÇØ",id:"Mikrofon"},{jp:"ÁÖßÊòé",id:"Lampu"},{jp:"ÊâáÈ¢®Ê©ü",id:"Kipas Angin"},{jp:"ÂÜ∑ËîµÂ∫´",id:"Kulkas"},
    {jp:"ÈõªÂ≠ê„É¨„É≥„Ç∏",id:"Microwave"},{jp:"Ê¥óÊøØÊ©ü",id:"Mesin Cuci"},{jp:"ÊéÉÈô§Ê©ü",id:"Vacuum"},{jp:"ÊôÇË®à",id:"Jam Dinding"},{jp:"ÈõªÁêÉ",id:"Bohlam"},
    {jp:"Â∑•ÂÖ∑",id:"Alat Perkakas"},{jp:"„Éâ„É©„Ç§„Éê„Éº",id:"Obeng"},{jp:"„Éè„É≥„Éû„Éº",id:"Palu"},{jp:"Èáò",id:"Paku"},{jp:"„Éâ„É™„É´",id:"Bor"},
    {jp:"Á∏Ñ",id:"Tali"},{jp:"Èéñ",id:"Rantai"},{jp:"ÁÆ±",id:"Kotak"},{jp:"Ë¢ã",id:"Tas/Kantong"},{jp:"„ÉÜ„Éº„Éñ„É´",id:"Meja"}
  ],
  tempat:[
    {jp:"ÂÆ∂",id:"Rumah"},{jp:"Â≠¶Ê†°",id:"Sekolah"},{jp:"ÂÖ¨Âúí",id:"Taman"},{jp:"Âõ≥Êõ∏È§®",id:"Perpustakaan"},{jp:"ÁóÖÈô¢",id:"Rumah Sakit"},
    {jp:"ÈßÖ",id:"Stasiun"},{jp:"Á©∫Ê∏Ø",id:"Bandara"},{jp:"Â∫ó",id:"Toko"},{jp:"„É¨„Çπ„Éà„É©„É≥",id:"Restoran"},{jp:"„Éõ„ÉÜ„É´",id:"Hotel"},
    {jp:"Êò†ÁîªÈ§®",id:"Bioskop"},{jp:"ÈäÄË°å",id:"Bank"},{jp:"ÈÉµ‰æøÂ±Ä",id:"Kantor Pos"},{jp:"Â∏ÇÂΩπÊâÄ",id:"Balai Kota"},{jp:"ÂçöÁâ©È§®",id:"Museum"},
    {jp:"Á•ûÁ§æ",id:"Kuil Shinto"},{jp:"ÂØ∫",id:"Vihara/Temple"},{jp:"Â∑ù",id:"Sungai"},{jp:"Â±±",id:"Gunung"},{jp:"Êµ∑",id:"Laut"},
    {jp:"Á©∫",id:"Langit"},{jp:"Ê£Æ",id:"Hutan"},{jp:"ÈÅìË∑Ø",id:"Jalan"},{jp:"Ê©ã",id:"Jembatan"},{jp:"Â∫≠",id:"Taman Rumah"},
    {jp:"„Éó„Éº„É´",id:"Kolam Renang"},{jp:"ÈÅäÂúíÂú∞",id:"Taman Hiburan"},{jp:"Ê∏Ø",id:"Pelabuhan"},{jp:"Â∏ÇÂ†¥",id:"Pasar"},{jp:"ÈßÖÂâç",id:"Depan Stasiun"},
    {jp:"ÈßêËªäÂ†¥",id:"Tempat Parkir"},{jp:"ÂÖ¨Ê∞ëÈ§®",id:"Balai Warga"},{jp:"ÂäáÂ†¥",id:"Teater"},{jp:"ÂãïÁâ©Âúí",id:"Kebun Binatang"},{jp:"Ê§çÁâ©Âúí",id:"Taman Botani"},
    {jp:"Â∑ùÂ≤∏",id:"Tepi Sungai"},{jp:"ÊµúËæ∫",id:"Pantai"},{jp:"Â±±È†Ç",id:"Puncak Gunung"},{jp:"Ê£Æ„ÅÆ‰∏≠",id:"Dalam Hutan"},{jp:"Â∫ÉÂ†¥",id:"Lapangan"},
    {jp:"ÈÄö„Çä",id:"Jalanan"},{jp:"Ë∑ØÂú∞",id:"Gang"},{jp:"ÂùÇ",id:"Bukit/Tanjakan"},{jp:"Ê©ã„ÅÆ‰∏ä",id:"Di Atas Jembatan"},{jp:"ÂÖ¨Âúí„ÅÆ‰∏≠",id:"Di Taman"}
  ],
  sehari:[
    {jp:"Êúù",id:"Pagi"},{jp:"Êòº",id:"Siang"},{jp:"Â§ïÊñπ",id:"Sore"},{jp:"Â§ú",id:"Malam"},{jp:"‰ªä",id:"Sekarang"},
    {jp:"Êò®Êó•",id:"Kemarin"},{jp:"‰ªäÊó•",id:"Hari Ini"},{jp:"ÊòéÊó•",id:"Besok"},{jp:"ÊôÇÈñì",id:"Waktu"},{jp:"ÂàÜ",id:"Menit"},
    {jp:"Áßí",id:"Detik"},{jp:"ÈÄ±",id:"Minggu"},{jp:"Êúà",id:"Bulan"},{jp:"Âπ¥",id:"Tahun"},{jp:"ÊúùÈ£ü",id:"Sarapan"},
    {jp:"ÊòºÈ£ü",id:"Makan Siang"},{jp:"Â§ïÈ£ü",id:"Makan Malam"},{jp:"‰ªï‰∫ã",id:"Pekerjaan"},{jp:"ÂãâÂº∑",id:"Belajar"},{jp:"‰ºë„Åø",id:"Istirahat"},
    {jp:"Â≠¶Ê†°",id:"Sekolah"},{jp:"ÂØù„Çã",id:"Tidur"},{jp:"Ëµ∑„Åç„Çã",id:"Bangun"},{jp:"ÈÅä„Å∂",id:"Bermain"},{jp:"ÈÅãÂãï",id:"Olahraga"},
    {jp:"ÊéÉÈô§",id:"Membersihkan"},{jp:"Ê¥óÊøØ",id:"Mencuci"},{jp:"Ë≤∑„ÅÑÁâ©",id:"Belanja"},{jp:"ÊóÖË°å",id:"Bepergian"},{jp:"‰ºëÊöá",id:"Libur"},
    {jp:"Â§©Ê∞ó",id:"Cuaca"},{jp:"Èõ®",id:"Hujan"},{jp:"Èõ™",id:"Salju"},{jp:"È¢®",id:"Angin"},{jp:"Êô¥„Çå",id:"Cerah"},
    {jp:"Êõá„Çä",id:"Mendung"},{jp:"Âøô„Åó„ÅÑ",id:"Sibuk"},{jp:"Êöá",id:"Luang"},{jp:"Ê•Ω„Åó„ÅÑ",id:"Menyenangkan"},{jp:"Áñ≤„Çå„Åü",id:"Lelah"},
    {jp:"Êúù„ÅÆÊï£Ê≠©",id:"Jalan Pagi"},{jp:"ÊòºÂØù",id:"Tidur Siang"},{jp:"Â§ïÁÑº„Åë",id:"Senja"},{jp:"Â§úÊõ¥„Åã„Åó",id:"Begadang"},{jp:"ÊØéÊó•",id:"Setiap Hari"},
    {jp:"ÊØéÈÄ±",id:"Setiap Minggu"},{jp:"ÊØéÊúà",id:"Setiap Bulan"},{jp:"ÊØéÂπ¥",id:"Setiap Tahun"},{jp:"ÈÄ±Êú´",id:"Akhir Pekan"},{jp:"‰ºëÊó•",id:"Hari Libur"}
  ],
  kerja:[
    {jp:"‰ºöÁ§æ",id:"Perusahaan"},{jp:"‰ªï‰∫ã",id:"Pekerjaan"},{jp:"‰ºöË≠∞",id:"Rapat"},{jp:"‰∏äÂè∏",id:"Atasan"},{jp:"ÂêåÂÉö",id:"Rekan Kerja"},
    {jp:"ÈÉ®Èï∑",id:"Kepala Bagian"},{jp:"Á§æÂì°",id:"Karyawan"},{jp:"È°ßÂÆ¢",id:"Pelanggan"},{jp:"Â†±Âëä",id:"Laporan"},{jp:"ÊèêÂá∫",id:"Penyerahan"},
    {jp:"Á∑†Âàá",id:"Deadline"},{jp:"ÈõªË©±",id:"Telepon"},{jp:"„É°„Éº„É´",id:"Email"},{jp:"ÊñáÊõ∏",id:"Dokumen"},{jp:"Ë≥áÊñô",id:"Materi"},
    {jp:"Âñ∂Ê•≠",id:"Penjualan"},{jp:"ÈñãÁô∫",id:"Pengembangan"},{jp:"‰ºöË®à",id:"Akuntansi"},{jp:"‰∫∫‰∫ã",id:"HR"},{jp:"‰ºÅÁîª",id:"Perencanaan"},
    {jp:"Êà¶Áï•",id:"Strategi"},{jp:"ÁõÆÊ®ô",id:"Target"},{jp:"ÈÅîÊàê",id:"Pencapaian"},{jp:"Â†±ÈÖ¨",id:"Gaji"},{jp:"ÊòáÈÄ≤",id:"Promosi"},
    {jp:"Âá∫Âºµ",id:"Perjalanan Dinas"},{jp:"Á†î‰øÆ",id:"Training"},{jp:"Ë©ï‰æ°",id:"Evaluasi"},{jp:"Ê•≠Âãô",id:"Operasional"},{jp:"Ë≤¨‰ªª",id:"Tanggung Jawab"},
    {jp:"Â•ëÁ¥Ñ",id:"Kontrak"},{jp:"Èù¢Êé•",id:"Wawancara"},{jp:"Â±•Ê≠¥Êõ∏",id:"CV"},{jp:"Ë≥áÊñô‰ΩúÊàê",id:"Membuat Materi"},{jp:"‰∫§Ê∏â",id:"Negosiasi"},
    {jp:"‰ºöË®àÂá¶ÁêÜ",id:"Proses Akuntansi"},{jp:"„Éó„É≠„Ç∏„Çß„ÇØ„Éà",id:"Proyek"},{jp:"ÈÄ≤Êçó",id:"Kemajuan"},{jp:"Â†±ÂëäÊõ∏",id:"Laporan Tertulis"},{jp:"Êâì„Å°Âêà„Çè„Åõ",id:"Pertemuan"},
    {jp:"Á∑†Áµê",id:"Penandatanganan"},{jp:"Ê•≠Á∏æ",id:"Prestasi"},{jp:"‰ºÅÁîªÊõ∏",id:"Proposal"},{jp:"‰∫∫Êùê",id:"Sumber Daya Manusia"},{jp:"ÁÆ°ÁêÜ",id:"Manajemen"},
    {jp:"ÊîπÂñÑ",id:"Perbaikan"},{jp:"Ë™øÊüª",id:"Penelitian"},{jp:"ÂàÜÊûê",id:"Analisis"},{jp:"‰ºÅÁîª‰ºöË≠∞",id:"Rapat Perencanaan"},{jp:"Ê•≠ÂãôÊîπÂñÑ",id:"Perbaikan Proses"}
  ],
  sifat:[
    {jp:"Â§ß„Åç„ÅÑ",id:"Besar"},{jp:"Â∞è„Åï„ÅÑ",id:"Kecil"},{jp:"Èï∑„ÅÑ",id:"Panjang"},{jp:"Áü≠„ÅÑ",id:"Pendek"},{jp:"Êñ∞„Åó„ÅÑ",id:"Baru"},
    {jp:"Âè§„ÅÑ",id:"Lama"},{jp:"È´ò„ÅÑ",id:"Tinggi/Mahal"},{jp:"‰Ωé„ÅÑ",id:"Rendah"},{jp:"ÈÄü„ÅÑ",id:"Cepat"},{jp:"ÈÅÖ„ÅÑ",id:"Lambat"},
    {jp:"ËâØ„ÅÑ",id:"Baik"},{jp:"ÊÇ™„ÅÑ",id:"Buruk"},{jp:"Âº∑„ÅÑ",id:"Kuat"},{jp:"Âº±„ÅÑ",id:"Lemah"},{jp:"Êöë„ÅÑ",id:"Panas"},
    {jp:"ÂØí„ÅÑ",id:"Dingin"},{jp:"Êòé„Çã„ÅÑ",id:"Terang"},{jp:"Êöó„ÅÑ",id:"Gelap"},{jp:"Áæé„Åó„ÅÑ",id:"Indah"},{jp:"ÈÜú„ÅÑ",id:"Jelek"}
  ]
};
function loadKanaUI() {
  const hir = document.getElementById('hiragana');
  const kat = document.getElementById('katakana');
  hir.innerHTML=''; kat.innerHTML='';
  hiragana.forEach(h=>{
    const b = document.createElement('button');
    b.className='kanaBtn';
    b.innerText = h.k + "\n" + h.r;
    b.onclick = ()=> { playSound(h.k); };
    hir.appendChild(b);
  });
  katakana.forEach(h=>{
    const b = document.createElement('button');
    b.className='kanaBtn';
    b.innerText = h.k + "\n" + h.r;
    b.onclick = ()=> { playSound(h.k); };
    kat.appendChild(b);
  });
}

function loadKosakata(){
  for(let cat in kosakataData){
    const container = document.getElementById(cat);
    if(!container) continue;
    container.innerHTML = '';
    kosakataData[cat].forEach(k=>{
      const card = document.createElement('div');
      card.className='card';
      const jpEsc = (k.jp||'').replace(/'/g,"\\'");
      card.innerHTML = `<div style="font-size:1.2em;"><b>${k.jp}</b></div><div style="margin-top:6px"><small>${k.id}</small></div>
        <div style="margin-top:8px;"><button onclick="playSound('${jpEsc}')" style="padding:6px 8px;border-radius:6px;border:none;background:linear-gradient(180deg,#7aa66b,#4caf50);color:white;cursor:pointer">‚ñ∂Ô∏è Ucapkan</button></div>`;
      container.appendChild(card);
    });
  }
}

function filterKosakata(){
  const q = document.getElementById('kosSearch').value.trim().toLowerCase();
  document.querySelectorAll('.kosakata-category').forEach(catDiv=>{
    Array.from(catDiv.children).forEach(card=>{
      const txt = card.innerText.toLowerCase();
      card.style.display = (q === '' || txt.indexOf(q) !== -1) ? 'inline-block' : 'none';
    });
  });
}

function showSection(id){
  try{ playPluck(); }catch(e){}
  document.querySelectorAll('main section').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}
function showSubKosakata(cat){
  try{ playPluck(); }catch(e){}
  document.querySelectorAll('.kosakata-category').forEach(c=>c.style.display='none');
  const el = document.getElementById(cat);
  if(el) el.style.display='block';
  document.getElementById('kosSearch').value='';
}
let quizIndex=0, quizScore=0, quizTotal=10, quizCurrent=null;

function startQuiz(){
  quizTotal = Math.max(1, parseInt(document.getElementById('quizCount').value) || 10);
  quizIndex = 0; quizScore = 0;
  document.getElementById('quizResult').innerText='';
  nextQuestion();
}
function nextQuestion(){
  const mode = document.getElementById('quizMode').value;
  if(quizIndex >= quizTotal){
    document.getElementById('quizQuestion').innerText = `Selesai! Skor Anda: ${quizScore}/${quizTotal}`;
    document.getElementById('quizOptions').innerHTML = '';
    document.getElementById('quizWrite').style.display = 'none';
    document.getElementById('quizProgress').innerText = '';
    try{ playBell(); }catch(e){}
    return;
  }
  quizCurrent = hiragana[Math.floor(Math.random()*hiragana.length)];
  document.getElementById('quizQuestion').innerHTML = `Huruf apa ini?<br><span style="font-size:2.5em">${quizCurrent.k}</span>`;
  playSound(quizCurrent.k);
  document.getElementById('quizProgress').innerText = `Soal ${quizIndex+1} / ${quizTotal}`;

  if(mode === 'choice'){
    document.getElementById('quizOptions').style.display = 'block';
    document.getElementById('quizWrite').style.display = 'none';
    let opts = [quizCurrent.r];
    while(opts.length < 4){
      const r = hiragana[Math.floor(Math.random()*hiragana.length)].r;
      if(!opts.includes(r)) opts.push(r);
    }
    opts.sort(()=>Math.random()-0.5);
    document.getElementById('quizOptions').innerHTML = opts.map(o=>`<button class="quiz-btn" onclick="checkChoice('${o}')">${o}</button>`).join(' ');
  } else {
    document.getElementById('quizOptions').style.display = 'none';
    document.getElementById('quizWrite').style.display = 'block';
    document.getElementById('quizInput').value = '';
    document.getElementById('quizInput').focus();
  }
}

function checkChoice(selected){
  const correct = quizCurrent.r;
  if(selected === correct){
    quizScore++; showToast('‚úÖ Benar!');
  } else {
    showToast(`‚ùå Salah ‚Äî Jawaban: ${correct}`);
  }
  quizIndex++; setTimeout(nextQuestion, 300);
}

function submitWritten(){
  const writeType = document.getElementById('writeType').value;
  const raw = document.getElementById('quizInput').value.trim();
  if(raw === '') { showToast('Ketik jawaban terlebih dahulu.'); return; }
  let isCorrect = false;
  if(writeType === 'romaji'){
    isCorrect = raw.toLowerCase() === quizCurrent.r.toLowerCase();
  } else {
    isCorrect = raw === quizCurrent.k;
  }
  if(isCorrect){
    quizScore++; showToast('‚úÖ Benar!');
  } else {
    const expect = (writeType === 'romaji') ? quizCurrent.r : quizCurrent.k;
    showToast(`‚ùå Salah ‚Äî Jawaban: ${expect}`);
  }
  quizIndex++; setTimeout(nextQuestion, 350);
}

function skipQuestion(){
  quizIndex++; showToast('‚ö†Ô∏è Soal dilewati.'); setTimeout(nextQuestion, 200);
}

function endQuiz(){ quizIndex = quizTotal; nextQuestion(); }

function showToast(msg){
  const t = document.getElementById('toast');
  t.innerText = msg; t.style.display = 'block';
  setTimeout(()=>{ t.style.display = 'none'; }, 1600);
  try{ playPluck(); }catch(e){}
}

document.addEventListener('change', (e)=>{
  if(e.target && e.target.id === 'quizMode'){
    const val = e.target.value;
    const label = document.getElementById('labelWriteType');
    if(val === 'writing') label.style.display = 'inline-block';
    else label.style.display = 'none';
  }
});

function spawnLeaf(){
  const leaf = document.createElement('div');
  leaf.className = 'leaf';
  
  const startLeft = Math.random() * 100; // vw
  leaf.style.left = startLeft + 'vw';
  leaf.style.top = (-6 - Math.random()*6) + 'vh';
  
  const s = 10 + Math.random()*20;
  leaf.style.width = s + 'px';
  leaf.style.height = (s*0.9) + 'px';
  
  const dur = 5 + Math.random()*6;
  leaf.style.animation = `leafFall ${dur}s linear forwards`;
  leaf.style.transform = `rotate(${Math.random()*180}deg)`;
  document.body.appendChild(leaf);
  setTimeout(()=> leaf.remove(), (dur*1000) + 1200);
}

let leafInterval = null;
function startLeaves(){
  if(leafInterval) return;
  leafInterval = setInterval(()=> {
    
    const c = Math.random() < 0.6 ? 1 : (Math.random() < 0.5 ? 2 : 3);
    for(let i=0;i<c;i++) spawnLeaf();
  }, 800);
}
function stopLeaves(){
  if(leafInterval){ clearInterval(leafInterval); leafInterval = null; }
}


window.onload = () => {
  
  speechSynthesis.onvoiceschanged = () => {
    const jp = getBestJPVoice();
    if (jp) cachedJPVoice = jp;
  };
  speechSynthesis.getVoices();

  loadKanaUI();
  loadKosakata();
  showSubKosakata('angka');

  const qi = document.getElementById('quizInput');
  const quizModeEl = document.getElementById('quizMode');
  if(qi){
    qi.addEventListener('keydown', function(e){
      if(e.key === 'Enter'){
        e.preventDefault();
        try{
          if(quizModeEl && quizModeEl.value === 'writing') submitWritten();
        }catch(err){ console.error('submitWritten error', err); }
      }
    });
  }


  setTimeout(()=> {
    const ld = document.getElementById('loading');
    if(!ld) return;
    ld.classList.add('hidden');
    ld.setAttribute('aria-hidden','true');
    try{ 
      if(!audioCtx) ensureAudio();
      startAmbientMusic();
      startLeaves();
      playBell();
    } catch(e){ console.warn('start ambient failed', e); }
  }, 1200);
  updateMusicButton();
};

</script>
</body>
</html>